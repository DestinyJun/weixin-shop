<div class="tab-client">
  <app-header [option]="headerOption" (headerRightClick)="onHeaderRightClick()"></app-header>
  <div class="tab-client-search">
    <weui-searchbar
      [placeholder]="'请输入你想输入的内容'"
      (search)="onBarSearch($event)"
      (cancel)="onBarClear()"
      (clear)="onBarCancel()"
      (submit)="onBarSubmit($event)">
    </weui-searchbar>
    <div class="weui-panel" style="margin-top: 0px;" *ngIf="value">
      <div class="weui-panel__hd">查询{{value}}</div>
      <div class="weui-panel__bd" *ngIf="searchItems | async; let searchItems; else loading">
        <div class="weui-cell weui-cell_access" *ngFor="let item of searchItems">
          <div class="weui-cell__bd weui-cell_primary">
            <p>{{item}}</p>
          </div>
        </div>
        <div class="weui-media-box weui-media-box_text" *ngIf="searchItems?.length === 0">Can't find any！</div>
      </div>
      <ng-template #loading>
        <div class="weui-panel__bd">
          <div class="weui-media-box weui-media-box_text">Loading...</div>
        </div>
      </ng-template>
      <!--  <a class="weui-panel__ft" href="javascript:void(0);">
          <div class="weui-cell weui-cell_access weui-cell_link">
            <div class="weui-cell__bd">More</div>
            <div class="weui-cell__ft"></div>
          </div>
        </a>-->
    </div>
  </div>
  <div class="tab-client-alphabet">
    <ul>
      <li *ngFor="let item of clientList;let i = index">
        <span>{{item?.firstPY}}</span>
      </li>
    </ul>
  </div>
  <div class="tab-client-scroll">
     <weui-infiniteloader (loadmore)="clientLoadMore($event)" [config]="clientloaderConfig">
       <div class="client-list" *ngFor="let item of clientList">
         <div class="weui-cells__title" [id]="item?.firstPY">{{item?.firstPY}}</div>
         <div class="weui-cells">
           <div class="weui-cell" (touchmove)="onTouchMove($event, item)" (touchstart)="onTouchstart($event)">
             <div class="weui-cell__bd" (click)="clientNameClick(item, 'address')">
               <p><span>{{item.name}}</span></p>
             </div>
             <div class="weui-cell__ft">
               <button *ngIf="item.editState" class="weui-btn weui-btn_warn" (click)="clientDeleteClick(item.id)">删除</button>
               <button *ngIf="!item.editState" class="weui-btn weui-btn_default" style="color: #7FB56E;" (click)="clientNameClick(item , 'update')">编辑</button>
             </div>
           </div>
         </div>
       </div>
     </weui-infiniteloader>
  </div>
  <div class="tab-client-address">
    <weui-mask #tabClientMask>
      <div class="client-address-content" [hidden]="!clientMaskShow">
        <div class="weui-cells" style="margin-top: 0">
          <div class="weui-cell">
            <div class="weui-cell__bd" style="text-align: center">
              <span style="color: #000;">{{clientName}}</span>
            </div>
            <div class="weui-cell__ft" (click)="this.tabClientMask.hide()">
              <i class="fa fa-times" aria-hidden="true"></i>
            </div>
          </div>
        </div>
        <div class="scroll">
          <div class="scroll-remind" *ngIf="clientAddressList?.length === 0">
            <p>该客户暂无收货地址</p>
          </div>
          <div class="scroll-content" *ngFor="let item of clientAddressList">
            <p>收货人：{{item?.name}}</p>
            <p><span>电</span><span style="margin-left: 16px;">话</span>：{{item?.phone}}</p>
            <p><span>地</span><span style="margin-left: 16px;">址</span>：{{item?.address}}</p>
          </div>
        </div>
      </div>
      <div class="client-update-content" [hidden]="clientMaskShow">
        <div class="weui-cells" style="margin-top: 0;border-radius: 5px">
          <div class="weui-cell">
            <div class="weui-cell__bd" style="text-align: center">
              <span style="color: #000;">客户信息修改</span>
            </div>
            <div class="weui-cell__ft" (click)="this.tabClientMask.hide()">
              <i class="fa fa-times" aria-hidden="true"></i>
            </div>
          </div>
          <div class="weui-cell">
            <div class="weui-cell__bd">
              <input class="weui-input" type="text" placeholder="请输入新名称" [(ngModel)]="clientUpdateName.name">
            </div>
          </div>
          <div class="weui-cell">
            <div class="weui-cell__bd">
              <button class="weui-btn weui-btn_primary" [ngClass]="{'weui-btn_disabled': !clientUpdateName.name}" [disabled]="!clientUpdateName.name">保存</button>
            </div>
          </div>
        </div>
      </div>
    </weui-mask>
  </div>
  <div class="tab-client-remind">
    <div class="client-dialog">
      <weui-dialog #iosDelDialog [config]="configDelDialog"></weui-dialog>
    </div>
  </div>
</div>

